<!DOCTYPE html>
<html>
<head>
    <title>Test Catalog Data Loading</title>
</head>
<body>
    <h1>Testing Catalog Data Loading</h1>
    <div id="results"></div>
    
    <script>
        async function testCatalogData() {
            const results = document.getElementById('results');
            
            try {
                // Test direct API call
                console.log('Testing direct API call...');
                const response = await fetch('https://edenparfum.netlify.app/api/v2/perfumes?limit=506');
                const apiData = await response.json();
                
                results.innerHTML += `<p><strong>Direct API Test:</strong></p>`;
                results.innerHTML += `<p>Success: ${apiData.success}</p>`;
                results.innerHTML += `<p>Total: ${apiData.total}</p>`;
                results.innerHTML += `<p>Data Count: ${apiData.data.length}</p>`;
                
                // Test what would happen on the actual site
                window.perfumesDatabase = apiData.data;
                
                results.innerHTML += `<p><strong>Loaded Data Test:</strong></p>`;
                results.innerHTML += `<p>perfumesDatabase length: ${window.perfumesDatabase ? window.perfumesDatabase.length : 'undefined'}</p>`;
                
                // Show first few perfume names
                if (window.perfumesDatabase && window.perfumesDatabase.length > 0) {
                    results.innerHTML += `<p><strong>First 5 perfumes:</strong></p>`;
                    results.innerHTML += `<ul>`;
                    for (let i = 0; i < Math.min(5, window.perfumesDatabase.length); i++) {
                        const perfume = window.perfumesDatabase[i];
                        results.innerHTML += `<li>${perfume.name} by ${perfume.brand}</li>`;
                    }
                    results.innerHTML += `</ul>`;
                }
                
            } catch (error) {
                results.innerHTML += `<p><strong>Error:</strong> ${error.message}</p>`;
                console.error('Test failed:', error);
            }
        }
        
        // Run test when page loads
        testCatalogData();
    </script>
</body>
</html>